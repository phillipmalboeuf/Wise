(function(){var a;window.Wise={Collections:{},Models:{},Views:{},Routers:{},views:[],init:function(){return this.cart=new a.Models.Cart,this.cart_view=new a.Views.Cart({model:this.cart}),this.login_view=new a.Views.Login,this.account_view=new a.Views.Account,this.forgot_password_view=new a.Views.ForgotPassword,this.credit_card_view=new a.Views.CreditCard,this.newsletter_view=new a.Views.Newsletter,this.render_views(),document.addEventListener("turbolinks:render",this.render_views.bind(this))},render_views:function(){var b,c,d,e;for(d=this.views,b=0,c=d.length;b<c;b++)e=d[b],e.undelegateEvents();if(delete this.views,this.views=[],$("[data-product-id]").each(function(b){return function(c,d){return b.views.push(new a.Views.Product({el:d}))}}(this)),$("[data-navigation]").each(function(b){return function(c,d){return b.views.push(new a.Views.Nav({el:d}))}}(this)),$("[data-slider]").each(function(b){return function(c,d){return b.views.push(new a.Views.Slider({el:d}))}}(this)),this.query=a.helpers.get_query_string(),null!=this.query.cart?a.cart_view.show():a.cart_view.hide(),null!=this.query.login?a.login_view.show():a.login_view.hide(),null!=this.query.credit_card?a.credit_card_view.show():a.credit_card_view.hide(),null!=this.query.account?a.account_view.show():a.account_view.hide(),$("[data-show-cart]").length>0)return this.cart_view.show()}},"wisecare.co"===window.location.host&&(window.location="https://wisemenscare.com"+window.location.pathname),a=window.Wise,window._,window.Backbone,$(function(){return a.init()})}).call(this),function(){Wise.cookies={set:function(a,b,c){var d,e;return d=new Date,d.setTime(d.getTime()+24*c*60*60*1e3),e="expires="+d.toGMTString(),document.cookie="X-"+a+"="+b+"; "+e+"; path=/"},set_for_a_session:function(a,b){return document.cookie="X-"+a+"="+b+"; path=/"},get:function(a){var b,c,d,e,f,g;for(a="X-"+a+"=",g=!1,c=document.cookie.split(";"),d=function(b){if(b=b.trim(),0===b.indexOf(a))return g=b.substring(a.length,b.length)},e=0,f=c.length;e<f;e++)b=c[e],d(b);return g||(g=null),g},delete:function(a){return document.cookie="X-"+a+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/"}}}.call(this),function(){Wise.helpers={get_query_string:function(){var a,b,c,d;for(d={},b=location.search.slice(1),c=/([^&=]+)=([^&]*)/g,a=null;a=c.exec(b);)d[decodeURIComponent(a[1])]=decodeURIComponent(a[2]);return d}}}.call(this),function(){Handlebars.registerHelper("money",function(a){return null!=a?"<span class=money>$"+(parseFloat(a)/100).toFixed(2)+"</span>":null}),Handlebars.registerHelper("truncate",function(a,b){return null!=a?(a=a.slice(0,b),a.length>=b&&(a+="..."),a):null}),Handlebars.registerHelper("if_equal",function(a,b,c){return a===b?c.fn(this):null}),Handlebars.registerHelper("if_lower",function(a,b,c){return a<b?c.fn(this):null}),Handlebars.registerHelper("if_higher",function(a,b,c){return a>b?c.fn(this):null}),Handlebars.registerHelper("unless_equal",function(a,b,c){return a!==b?c.fn(this):null})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;Wise.Models.Cart=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.url="/cart.js",c.prototype.parse=function(a){return a.item_count>0?$("[data-item-count]").text(a.item_count):$("[data-item-count]").text(""),a},c.prototype.initialize=function(){return this.fetch()},c.prototype.add=function(a,b,c){return null==b&&(b=1),null==c&&(c={}),Turbolinks.controller.adapter.progressBar.setValue(0),Turbolinks.controller.adapter.progressBar.show(),c.id=parseInt(a),c.quantity=b,$.ajax("/cart/add.js",{method:"POST",dataType:"json",data:c,success:function(a){return function(b){return Turbolinks.controller.adapter.progressBar.setValue(100),Turbolinks.controller.adapter.progressBar.hide(),a.fetch()}}(this)})},c.prototype.change=function(a,b){return Turbolinks.controller.adapter.progressBar.setValue(0),Turbolinks.controller.adapter.progressBar.show(),$.ajax("/cart/change.js",{method:"POST",dataType:"json",data:{quantity:b,id:a},success:function(a){return function(b){return Turbolinks.controller.adapter.progressBar.setValue(100),Turbolinks.controller.adapter.progressBar.hide(),a.fetch()}}(this)})},c.prototype.remove=function(a){return this.change(a,0)},c}(Backbone.Model)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;Wise.Views.Login=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.el=$("#login"),c.prototype.data={},c.prototype.events={"click [data-hide]":"hide","submit #customer_login":"customer_login","submit #create_customer":"create_customer","click [data-submit]":"submit_form","click [data-show-forgot-password]":"show_forgot_password"},c.prototype.initialize=function(){return this.render()},c.prototype.render=function(){return _.extend(this.data,{lang:window.lang}),this},c.prototype.customer_login=function(a){return a.preventDefault(),Turbolinks.controller.adapter.progressBar.setValue(0),Turbolinks.controller.adapter.progressBar.show(),$.ajax(a.currentTarget.getAttribute("action"),{method:"POST",dataType:"html",data:{"customer[email]":a.currentTarget["customer[email]"].value,"customer[password]":a.currentTarget["customer[password]"].value,form_type:"customer_login",utf8:"✓"},success:function(b){return function(b){var c;return Turbolinks.controller.adapter.progressBar.setValue(100),Turbolinks.controller.adapter.progressBar.hide(),c=$(b).find(".errors"),c.length>0?$(a.currentTarget).find("[data-errors]").text(c.text()):($(a.currentTarget).find("[data-errors]").text(""),window.location="?account=true")}}()})},c.prototype.create_customer=function(a){return a.preventDefault(),Turbolinks.controller.adapter.progressBar.setValue(0),Turbolinks.controller.adapter.progressBar.show(),$.ajax(a.currentTarget.getAttribute("action"),{method:"POST",data:{"customer[email]":a.currentTarget["customer[email]"].value,"customer[password]":a.currentTarget["customer[password]"].value,"customer[first_name]":a.currentTarget["customer[first_name]"].value,"customer[last_name]":a.currentTarget["customer[last_name]"].value,form_type:"create_customer",utf8:"✓"},success:function(b){return function(b){var c;return Turbolinks.controller.adapter.progressBar.setValue(100),Turbolinks.controller.adapter.progressBar.hide(),c=$(b).find(".errors"),c.length>0?$(a.currentTarget).find("[data-errors]").text(c.text()):($(a.currentTarget).find("[data-errors]").text(""),window.location="?account=true")}}()})},c.prototype.submit_form=function(a){return""!==this.$el.find("#customer_login [name='customer[email]']").val()?this.$el.find("#customer_login").submit():""!==this.$el.find("#create_customer [name='customer[email]']").val()?this.$el.find("#create_customer").submit():void 0},c.prototype.toggle=function(a){return this.$el.hasClass("fade_out")?this.show(a):this.hide(a)},c.prototype.show=function(a){return null!=a&&a.preventDefault(),this.$el.removeClass("fade_out"),this.$el.find("#login_email").focus()},c.prototype.hide=function(a){return null!=a&&a.preventDefault(),this.$el.addClass("fade_out")},c.prototype.show_forgot_password=function(a){return Wise.forgot_password_view.show(a)},c}(Backbone.View)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;Wise.Views.Account=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.el=$("#account"),c.prototype.data={},c.prototype.events={"click [data-hide]":"hide","click [data-logout]":"logout","click [data-show-tab]":"show_tab","click [data-remove-address]":"remove_address"},c.prototype.initialize=function(){return c.__super__.initialize.call(this)},c.prototype.render=function(){return _.extend(this.data,{lang:window.lang}),c.__super__.render.call(this),this},c.prototype.show_tab=function(a){var b;return b=a.currentTarget.getAttribute("data-show-tab"),this.$el.find("[data-show-tab]").removeClass("overlay__link--focus"),this.$el.find("[data-tab]").addClass("hide"),this.$el.find("[data-tab='"+b+"']").removeClass("hide"),this.$el.find("[data-show-tab='"+b+"']").addClass("overlay__link--focus")},c.prototype.logout=function(a){return a.preventDefault(),$.ajax("/account/logout",{method:"GET",success:function(a){return window.location=window.location.pathname}})},c.prototype.remove_address=function(a){return a.preventDefault(),$.ajax("/account/addresses/"+a.currentTarget.getAttribute("data-remove-address"),{method:"DELETE",success:function(b){return $(a.currentTarget).parent().parent().remove()}})},c.prototype.show=function(a){return null!=a&&a.preventDefault(),this.$el.removeClass("fade_out")},c}(Wise.Views.Login)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;Wise.Views.Cart=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.el=$("#cart"),c.prototype.template=templates.cart,c.prototype.data={},c.prototype.events={"click [data-remove-from-cart]":"remove_from_cart","click [data-increment]":"increment","click [data-decrement]":"decrement","submit #cart_form":"checkout"},c.prototype.initialize=function(){return this.listenTo(this.model,"sync",this.render),$(".main").on("click",function(a){return function(){return a.hide()}}(this)),this.render()},c.prototype.render=function(){return _.extend(this.data,{model:this.model.toJSON(),lang:window.lang}),this.$el.html(this.template(this.data)),this},c.prototype.toggle=function(a){return this.$el.hasClass("fade_out")?this.show(a):this.hide(a)},c.prototype.show=function(a){return null!=a&&a.preventDefault(),this.$el.removeClass("fade_out")},c.prototype.hide=function(a){return null!=a&&a.preventDefault(),this.$el.addClass("fade_out")},c.prototype.remove_from_cart=function(a){return a.preventDefault(),Wise.cart.remove($(a.currentTarget).attr("data-remove-from-cart"))},c.prototype.increment=function(a){return a.preventDefault(),Wise.cart.change($(a.currentTarget).attr("data-increment"),parseInt($(a.currentTarget).attr("data-current-quantity"))+1)},c.prototype.decrement=function(a){return a.preventDefault(),Wise.cart.change($(a.currentTarget).attr("data-decrement"),parseInt($(a.currentTarget).attr("data-current-quantity"))-1)},c.prototype.checkout=function(a){var b;if(Wise.cookies.delete("subscription"),b=[],_.each(this.model.attributes.items,function(a){return function(a){if(a.properties&&_.contains(Object.keys(a.properties),"Months"))return b.push(a)}}()),b.length>0)return Wise.credit_card_view.show(a,b)},c}(Backbone.View)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;Wise.Views.Collections=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.events={},c.prototype.initialize=function(){return this.render()},c.prototype.render=function(){var a;return a=this.$el.find(".js-collection.hide"),a.length>0?($(a[Math.floor(Math.random()*a.length)]).removeClass("hide"),a=this.$el.find(".js-collection.hide"),$(a[Math.floor(Math.random()*a.length)]).removeClass("hide"),a=this.$el.find(".js-collection.hide"),$(a[Math.floor(Math.random()*a.length)]).removeClass("hide")):(a=this.$el.find(".js-product").addClass("hide"),$(a[Math.floor(Math.random()*a.length)]).removeClass("hide"),a=this.$el.find(".js-product.hide"),$(a[Math.floor(Math.random()*a.length)]).removeClass("hide"),a=this.$el.find(".js-product.hide"),$(a[Math.floor(Math.random()*a.length)]).removeClass("hide")),this},c}(Backbone.View)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;Wise.Views.CreditCard=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.el=$("#credit_card"),c.prototype.template=templates.credit_card,c.prototype.data={},c.prototype.events={"click [data-hide]":"hide","submit #credit_card_form":"submit"},c.prototype.items=[],c.prototype.initialize=function(){return c.__super__.initialize.call(this)},c.prototype.render=function(){return _.extend(this.data,{lang:window.lang,items:this.items}),this.$el.html(this.template(this.data)),this.elements=stripe.elements(),this.card=this.elements.create("card",{style:{base:{color:"#a98e63",fontSize:"16px",fontFamily:"Agendatype"},invalid:{color:"#d20000",iconColor:"#d20000"}}}),this.card.addEventListener("change",this.card_change.bind(this)),this.card.mount("#credit_card_input"),c.__super__.render.call(this),this},c.prototype.card_change=function(a){if(a.complete)return Turbolinks.controller.adapter.progressBar.setValue(0),Turbolinks.controller.adapter.progressBar.show(),stripe.createToken(this.card).then(function(a){return function(b){if(Turbolinks.controller.adapter.progressBar.setValue(100),Turbolinks.controller.adapter.progressBar.hide(),b.token)return a.token=b.token.id}}(this))},c.prototype.submit=function(a){if(a.preventDefault(),this.token)return Turbolinks.controller.adapter.progressBar.setValue(0),Turbolinks.controller.adapter.progressBar.show(),$.ajax("https://shopify.destruct.codes/subscriptions",{method:"POST",contentType:"application/json",data:JSON.stringify({token:this.token,plans:_.map(this.items,function(a){return{plan:a.product_id+"-"+a.properties.Months,quantity:a.quantity}})}),success:function(a){return function(a){return Turbolinks.controller.adapter.progressBar.setValue(100),Turbolinks.controller.adapter.progressBar.hide(),Wise.cookies.set("subscription",a._id),window.lang?window.location="/checkout?locale="+window.lang:window.location="/checkout"}}()})},c.prototype.show=function(a,b){return null!=a&&a.preventDefault(),this.items=b,this.render(),this.$el.removeClass("fade_out")},c}(Wise.Views.Login)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;Wise.Views.ForgotPassword=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.el=$("#forgot_password"),c.prototype.data={},c.prototype.events={"click [data-hide]":"hide","submit [action='/account/recover']":"recover_customer_password"},c.prototype.initialize=function(){return c.__super__.initialize.call(this)},c.prototype.render=function(){return c.__super__.render.call(this),this},c.prototype.recover_customer_password=function(a){return a.preventDefault(),Turbolinks.controller.adapter.progressBar.setValue(0),Turbolinks.controller.adapter.progressBar.show(),$.ajax(a.currentTarget.getAttribute("action"),{method:"POST",dataType:"html",data:{email:a.currentTarget.email.value,form_type:"recover_customer_password",utf8:"✓"},success:function(b){return function(b){var c;return Turbolinks.controller.adapter.progressBar.setValue(100),Turbolinks.controller.adapter.progressBar.hide(),c=$(b).find(".errors"),c.length>0?$(a.currentTarget).find("[data-errors]").text(c.text()):($(a.currentTarget).find("[data-errors]").text(""),$(a.currentTarget).find("[data-success]").text("Success!"))}}()})},c}(Wise.Views.Login)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;Wise.Views.Nav=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.events={"click [data-toggle-cart]":"toggle_cart","click [data-toggle-login]":"toggle_login","click [data-toggle-account]":"toggle_account"},c.prototype.initialize=function(){return this.render()},c.prototype.render=function(){return this},c.prototype.toggle_cart=function(a){return a.preventDefault(),Wise.cart_view.toggle()},c.prototype.toggle_login=function(a){return a.preventDefault(),Wise.login_view.toggle()},c.prototype.toggle_account=function(a){return a.preventDefault(),Wise.account_view.toggle()},c}(Backbone.View)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;Wise.Views.Newsletter=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.el=$("[data-newsletter]"),c.prototype.data={},c.prototype.events={"click [data-hide]":"hide","submit [data-newsletter-form]":"signup"},c.prototype.initialize=function(){return c.__super__.initialize.call(this)},c.prototype.render=function(){return null==Wise.cookies.get("newsletter_hidden")&&"never"!==this.$el.attr("data-newsletter-delay")&&setTimeout(function(a){return function(){return a.show()}}(this),1e3*this.$el.attr("data-newsletter-delay")),c.__super__.render.call(this)},c.prototype.signup=function(a){return a.preventDefault(),$.ajax("https://shopify.destruct.codes/_newsletter/signup",{method:"POST",contentType:"application/json",data:JSON.stringify({email:a.currentTarget.email.value,shop:a.currentTarget.shop.value}),success:function(b){return function(b){return Wise.cookies.set("newsletter_hidden",!0),$(a.currentTarget).text(a.currentTarget.getAttribute("data-succes-text"))}}(),error:function(b){return function(b){return $(a.currentTarget).find("[data-errors]").text(b.responseJSON.error)}}()})},c.prototype.hide=function(a){return Wise.cookies.set("newsletter_hidden",!0),c.__super__.hide.call(this,a)},c}(Wise.Views.Login)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;Wise.Views.Product=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.events={"click [data-add-to-cart]":"add_to_cart"},c.prototype.initialize=function(){return this.render()},c.prototype.render=function(){return this},c.prototype.add_to_cart=function(a){var b;return a.preventDefault(),a.stopImmediatePropagation(),a.currentTarget.blur(),b=this.$el.find("[name='recurring'] option:selected")[0],b.value>0?Wise.cart.add($(a.currentTarget).attr("data-add-to-cart"),1,{"properties[Recurring]":b.innerText,"properties[Months]":b.value}):Wise.cart.add($(a.currentTarget).attr("data-add-to-cart")),Wise.cart_view.show()},c}(Backbone.View)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;Wise.Views.Products=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.events={"click .js-next":"load_more","click .js-search_button":"toggle_search"},c.prototype.initialize=function(){return this.render()},c.prototype.render=function(){return this.$el.find(".js-next"),this},c.prototype.load_more=function(a){var b;return null!=a&&a.preventDefault(),b=this.$el.find(".js-next"),$.ajax(b.attr("href"),{method:"GET",dataType:"html",success:function(a){return function(c){var d;return a.$el.find(".js-products_container").append($(c).find(".js-products_container").html()),d=$(c).find(".js-next"),d.length>0?b.attr("href",d.attr("href")):b.remove(),a.render(),b.blur(),_.each(Wise.product_views,function(a){return a.undelegateEvents()}),Wise.product_views=[],$(".js-product").each(function(a,b){return Wise.product_views.push(new Wise.Views.Product({el:$(b)}))})}}(this)})},c.prototype.toggle_search=function(a){return Wise.search_view.toggle_search(a)},c}(Backbone.View)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;Wise.Views.Slider=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.current_slide=0,c.prototype.events={"click [data-next-slide-button]":"next_slide","click [data-previous-slide-button]":"previous_slide","click [data-slide-marker]":"slide_to"},c.prototype.initialize=function(){return this.slides_count=this.$el.find("[data-slide]").length,setTimeout(function(a){return function(){return a.render()}}(this),1e3)},c.prototype.render=function(){return this.$el.find("[data-slider-container]").css("width",this.slides_count+"00%"),this.$el.find("[data-slide]").css("width",100/this.slides_count+"%"),this},c.prototype.next_slide=function(){return this.current_slide===this.slides_count-1?this.slide_to(null,0):this.slide_to(null,this.current_slide+1)},c.prototype.previous_slide=function(){return 0===this.current_slide?this.slide_to(null,this.slides_count-1):this.slide_to(null,this.current_slide-1)},c.prototype.slide_to=function(a,b){return null!=a&&(b=parseInt(a.currentTarget.getAttribute("data-slide-marker")),a.currentTarget.blur()),this.current_slide=b,this.$el.find("[data-slide-marker]").removeClass("slider__marker--active"),this.$el.find("[data-slide-marker="+this.current_slide+"]").addClass("slider__marker--active"),this.$el.find("[data-slide]").css("transform","translateX(-"+this.current_slide+"00%)")},c}(Backbone.View)}.call(this);